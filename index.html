<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Med Photo V3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">

</head>
<body>
<!-- Pantalla de bienvenida -->
 <div id="pantallaBienvenida">
  <h1 class="tituloBienvenida">
    <span class="linea1">Bienvenidos</span><br>
    <span class="linea2">a</span><br>
    <span class="linea3">Med-Photo</span>
  </h1>
  
  <p>Capturá, organizá y almacená tus imágenes clínicas de forma simple y segura.</p>
  <button onclick="entrarAplicacion()">Entrar</button>
</div>

  <!-- Formulario -->

  <div id="formulario">
    <input type="text" id="dni" placeholder="DNI del paciente" required />
    
    <select id="regionAnatomica" onchange="mostrarSubregion()" required>
      <option value="" disabled selected>Seleccioná región anatómica</option>
      <option value="cuello">Cuello</option>
      <option value="hombro">Hombro</option>
      <option value="humero">Húmero</option>
      <option value="codo">Codo</option>
      <!-- agrega aquí más regiones si las vas a tener -->
    </select>

    <!-- Sub-selects por región (cada option será un diagnóstico) -->
    <select id="subregion-cuello"      class="subregion" style="display:none;">
      <option value="" disabled selected>Seleccioná diagnóstico de cuello</option>
      <option value="cuello-a">Cuello A</option>
      <option value="cuello-b">Cuello B</option>
    </select>

    <select id="subregion-hombro"     class="subregion" style="display:none;">
      <option value="" disabled selected>Seleccioná diagnóstico de hombro</option>
      <option value="hombro-a">Hombro A</option>
      <option value="hombro-b">Hombro B</option>
    </select>

    <select id="subregion-humero"     class="subregion" style="display:none;">
      <option value="" disabled selected>Seleccioná diagnóstico de húmero</option>
      <option value="humero-a">Húmero A</option>
      <option value="humero-b">Húmero B</option>
    </select>

    <select id="subregion-codo"       class="subregion" style="display:none;">
      <option value="" disabled selected>Seleccioná diagnóstico de codo</option>
      <option value="codo-a">Codo A</option>
      <option value="codo-b">Codo B</option>
    </select>
    <button onclick="iniciarCamara()">Continuar</button>
  </div>
  <div id="modoCaptura" style="
      display:none;
      position:absolute;
      top:0; left:0;
      width:100vw; height:100vh;
      background:rgba(0,0,0,0.8);
      
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:20px;
      z-index:5;
  ">
    <button class="botonControl" onclick="setModo('foto')">
      
    </button>
    <button class="botonControl" onclick="setModo('video')">
      Grabar Video
    </button>
  </div>
 
  <!-- Cámara y foto -->
  <video id="video" autoplay playsinline style="display:none;"></video>
  <img id="foto" style="display:none;" />
  <canvas id="canvas"></canvas>

 
 
  <!-- Controles -->
  <div id="controles" style="display:none;">
  
      <!-- Botón para tomar foto -->
      <button id="botonFoto" class="botonControl"
        onclick="sacarFoto()"style="display:none;"
      >Tomar Foto
      </button>
    
      <!-- Botones para grabar vídeo -->
      <button id="startRec" class="botonControl"
        onclick="startRecording()"style="display:none;"
      >  Grabar Video
      </button>
      <button id="stopRec"class="botonControl"
        onclick="stopRecording()" style="display:none;"
      > Detener Video
      </button>
    
      <!-- Botones generales para foto/video -->
      <button
        class="botonControl"
        onclick="guardarFoto()"
      >
         Guardar
      </button>
      <button id="guardarVideo" class="botonControl" onclick="guardarVideo()" style="display:none;">
       Guardar Vídeo
      </button>
      <button id="finalizar"
        class="botonControl"
        onclick="repetirFoto()"
      >
         Volver a tomar
      </button>
      <button
        class="botonControl"
        onclick="mostrarDespedida()"
      >
         Finalizar
      </button> 
  </div>
    <!-- Pantalla de despedida -->
    <div id="pantallaDespedida" style="display:none;
     position:absolute;
      top:0; left:0;
    width:100vw; height:100vh; background:#111; color:white;
     flex-direction:column; justify-content:center;
    align-items:center; text-align:center; padding:30px;
    box-sizing:border-box; z-index:6;">
   <h2>¡Gracias por usar Med-Photo!</h2>
    <p>Lee nuestros
      <a href="/terms.html" target="_blank" style="color:#4fd1c5; text-decoration:underline;">
        Términos &amp; Condiciones
      </a>
    </p>
   <p>Cuando quieras salir, cierra la pestaña de tu navegador.</p>
 
</div>

  
  <script src="https://unpkg.com/piexifjs"></script>
  <script src="index.js"></script>

</body>
</html>
